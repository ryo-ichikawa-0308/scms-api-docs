# 契約一覧

## 1. API概要

| 項目             | 内容                     | 備考                         |
| ---------------- | ------------------------ | ---------------------------- |
| API名            | 契約一覧                 | -                            |
| エンドポイント   | `/api/v1/contracts/list` | -                            |
| リソース         | `contracts`              | -                            |
| アクション       | `list`                   | -                            |
| メソッド         | `POST`                   | 検索条件をボディに含めるため |
| ビジネスドメイン | 契約                     | -                            |
| 認証要否         | 要                       | -                            |
| データ形式       | JSON                     | -                            |

## 2. リクエストヘッダ

| 項目名          | 必須 | 値の例             | 備考         |
| --------------- | ---- | ------------------ | ------------ |
| `Authorization` | 必須 | `Bearer eyJ...`    | 認証トークン |
| `Content-Type`  | 必須 | `application/json` | -            |

## 3. リクエスト

### ルートオブジェクト(リクエストボディ)

| 論理名     | 物理名      | 型     | DBテーブル | DBカラム   | 必須 | 最小桁数 | 最大桁数 | フォーマット | 最小値 | 最大値 | 備考                            |
| ---------- | ----------- | ------ | ---------- | ---------- | ---- | -------- | -------- | ------------ | ------ | ------ | ------------------------------- |
| サービス名 | serviceName | string | サービス   | サービス名 | 任意 | -        | 256      | -            | -      | -      | -                               |
| 取得件数   | limit       | number | -          | -          | 必須 | -        | -        | 整数         | 1      | 100    | ページングの1ページあたりの件数 |
| オフセット | offset      | number | -          | -          | 必須 | -        | -        | 整数         | 0      | -      | 取得開始位置(0から開始)         |

## 4. 処理概要

ログイン中のユーザーが契約している、契約の一覧と総件数を返す。認証トークンにより、アクセス権限を確認する。

## 5. レスポンス

- **レスポンスコード** `200 OK`

- **レスポンス**

### ルートオブジェクト(レスポンスボディ)

| 論理名     | 物理名      | 型     | DBテーブル | DBカラム | 備考                                        |
| ---------- | ----------- | ------ | ---------- | -------- | ------------------------------------------- |
| 総件数     | totalCount  | number | -          | -        | 検索条件に合致したレコードの総件数          |
| 取得件数   | limit       | number | -          | -        | リクエストで指定された1ページあたりの件数   |
| オフセット | offset      | number | -          | -        | リクエストで指定された取得開始位置          |
| 総ページ数 | totalPages  | number | -          | -        | totalCountとlimitから計算される総ページ数   |
| 現在ページ | currentPage | number | -          | -        | offsetとlimitから計算される現在のページ番号 |
| 契約リスト | contracts   | array  | -          | -        | 取得件数に応じた契約情報配列                |

#### contractsオブジェクト(契約情報)

| 論理名                 | 物理名         | 型     | DBテーブル           | DBカラム   | 備考 |
| ---------------------- | -------------- | ------ | -------------------- | ---------- | ---- |
| ID                     | id             | string | 契約                 | ID         | -    |
| ユーザーID             | usersId        | string | ユーザー             | ID         | -    |
| ユーザー提供サービスID | userServicesId | string | ユーザー提供サービス | ID         | -    |
| サービス名             | name           | string | サービス             | サービス名 | -    |
| 単価                   | price          | number | サービス             | 単価       | -    |
| 契約数                 | quantity       | number | 契約                 | 契約数     | -    |

## 6. エラー定義

| HTTPステータスコード      | エラーメッセージ(必須)       | エラーメッセージ詳細(任意)     | 発生条件                                   |
| ------------------------- | ---------------------------- | ------------------------------ | ------------------------------------------ |
| 400 BAD REQUEST           | 入力内容に誤りがあります     | 取得件数、オフセットは必須です | バリデーションエラー                       |
| 401 UNAUTHORIZED          | 認証情報が無効です           | -                              | トークンが無効、未設定                     |
| 500 INTERNAL SERVER ERROR | システムエラーが発生しました | -                              | 予期せぬサーバー内部エラー(DB接続失敗など) |
