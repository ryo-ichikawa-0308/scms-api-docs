# ログイン

## 1. API概要  

| 項目             | 内容                 | 備考 |
| ---------------- | -------------------- | ---- |
| API名            | ログイン             | -    |
| エンドポイント   | `/api/v1/auth/login` | -    |
| リソース         | `auth`               | -    |
| アクション       | `login`              | -    |
| メソッド         | `POST`               | -    |
| ビジネスドメイン | 認証                 | -    |
| 認証要否         | 不要                 | -    |
| データ形式       | JSON                 | -    |

## 2. リクエストヘッダ

| 項目名         | 必須 | 値の例             | 備考 |
| -------------- | ---- | ------------------ | ---- |
| `Content-Type` | 必須 | `application/json` | -    |

## 3. リクエスト

### ルートオブジェクト(リクエスト)

| 論理名         | 物理名   | 型     | DBテーブル | DBカラム       | 必須 | 最小桁数 | 最大桁数 | フォーマット   | 最小値 | 最大値 | 備考               |
| -------------- | -------- | ------ | ---------- | -------------- | ---- | -------- | -------- | -------------- | ------ | ------ | ------------------ |
| メールアドレス | email    | string | ユーザー   | メールアドレス | 必須 | 6        | 255      | メールアドレス | -      | -      | -                  |
| パスワード     | password | string | ユーザー   | パスワード     | 必須 | 8        | 16       | -              | -      | -      | ハッシュ化して照合 |

## 4. 処理概要

ユーザーID(メールアドレス)とパスワードを照合し、可の場合はリフレッシュトークンを登録してアクセストークンを返す。リフレッシュトークンはCookieで返却する。

## 5. レスポンス

- **レスポンスコード** `200 OK`

- **レスポンス**

### ルートオブジェクト(レスポンス)

| 論理名     | 物理名 | 型     | DBテーブル | DBカラム   | 備考 |
| ---------- | ------ | ------ | ---------- | ---------- | ---- |
| トークン   | token  | object | -          | -          | -    |
| ユーザーID | id     | string | ユーザー   | ID         | -    |
| ユーザー名 | name   | string | ユーザー   | ユーザー名 | -    |

#### トークン

| 論理名           | 物理名      | 型     | DBテーブル | DBカラム | 備考                |
| ---------------- | ----------- | ------ | ---------- | -------- | ------------------- |
| アクセストークン | accessToken | string | -          | -        | JWTアクセストークン |
| 有効期限         | expiresIn   | number | -          | -        | 有効期限            |

## 6. エラー定義

| HTTPステータスコード      | エラーメッセージ(必須)       | エラーメッセージ詳細(任意)           | 発生条件                                   |
| ------------------------- | ---------------------------- | ------------------------------------ | ------------------------------------------ |
| 400 BAD REQUEST           | 入力内容に誤りがあります     | メールアドレスとパスワードは必須です | バリデーションエラー                       |
| 401 UNAUTHORIZED          | 認証情報が無効です           | -                                    | 認証に失敗(ユーザー未登録も含む)           |
| 500 INTERNAL SERVER ERROR | システムエラーが発生しました | -                                    | 予期せぬサーバー内部エラー(DB接続失敗など) |
