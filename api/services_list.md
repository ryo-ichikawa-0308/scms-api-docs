# サービス一覧

## 1. API概要

| 項目           | 内容                    | 備考                         |
| -------------- | ----------------------- | ---------------------------- |
| API名          | サービス一覧            | -                            |
| エンドポイント | `/api/v1/services/list` | -                            |
| メソッド       | `POST`                  | 検索条件をボディに含めるため |
| 系統           | 取得                    | -                            |
| 認証要否       | 必要                    | -                            |
| データ形式     | JSON                    | -                            |

## 2. リクエストヘッダ

| 項目名          | 必須 | 値の例             | 備考         |
| --------------- | ---- | ------------------ | ------------ |
| `Authorization` | 必須 | `Bearer eyJ...`    | 認証トークン |
| `Content-Type`  | 必須 | `application/json` | -            |

## 3. リクエスト

### ルートオブジェクト(リクエストボディ)

| 論理名       | 物理名      | 型     | DBテーブル | DBカラム   | 必須 | 最小桁数 | 最大桁数 | フォーマット | 最小値 | 最大値 | 備考                            |
| ------------ | ----------- | ------ | ---------- | ---------- | ---- | -------- | -------- | ------------ | ------ | ------ | ------------------------------- |
| サービス名   | serviceName | string | サービス   | サービス名 | 任意 | -        | 100      | -            | -      | -      | 部分一致検索                    |
| サービス区分 | serviceType | number | サービス   | 区分       | 任意 | -        | -        | -            | 1      | 5      | 1: サブスク, 2: 従量課金        |
| 取得件数     | limit       | number | -          | -          | 必須 | 1        | 100      | 整数         | -      | -      | ページングの1ページあたりの件数 |
| オフセット   | offset      | number | -          | -          | 必須 | 0        | -        | 整数         | -      | -      | 取得開始位置(0から開始)       |

## 4. 処理概要

リクエストボディの検索条件に基づき、サービスの一覧と総件数を返す。認証トークンにより、アクセス権限を確認する。

## 5. レスポンス

- **レスポンスコード** `200 OK`

- **レスポンス**

### ルートオブジェクト(レスポンスボディ)

| 論理名         | 物理名     | 型     | DBテーブル | DBカラム | 備考                             |
| -------------- | ---------- | ------ | ---------- | -------- | -------------------------------- |
| 総件数         | totalCount | number | -          | -        | 検索条件に一致する全件数         |
| サービスリスト | services   | array  | -          | -        | 取得件数に応じたサービス情報配列 |

#### servicesオブジェクト(サービス情報)

| 論理名       | 物理名    | 型     | DBテーブル | DBカラム   | 備考                     |
| ------------ | --------- | ------ | ---------- | ---------- | ------------------------ |
| サービスID   | id        | string | サービス   | ID         | -                        |
| サービス名   | name      | string | サービス   | サービス名 | -                        |
| サービス区分 | type      | number | サービス   | 区分       | 1: サブスク, 2: 従量課金 |
| 料金         | price     | number | サービス   | 料金       | -                        |
| 提供開始日   | startDate | string | サービス   | 提供開始日 | YYYY-MM-DD 形式          |

## 6. エラー定義

| HTTPステータスコード      | エラーメッセージ(必須)       | エラーメッセージ詳細(任意)     | 発生条件                                   |
| ------------------------- | ---------------------------- | ------------------------------ | ------------------------------------------ |
| 400 BAD REQUEST           | 入力内容に誤りがあります     | 取得件数、オフセットは必須です | バリデーションエラー                       |
| 401 UNAUTHORIZED          | 認証情報が無効です           | -                              | トークンが無効、未設定                     |
| 500 INTERNAL SERVER ERROR | システムエラーが発生しました | -                              | 予期せぬサーバー内部エラー(DB接続失敗など) |
