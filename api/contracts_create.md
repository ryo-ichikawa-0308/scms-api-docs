# サービス契約

## 1. API概要

| 項目             | 内容                | 備考         |
| ---------------- | ------------------- | ------------ |
| API名            | サービス契約        | -            |
| エンドポイント   | `/api/v1/contracts` | -            |
| リソース         | `contracts`         | -            |
| アクション       | `create`            | -            |
| メソッド         | `POST`              | リソース作成 |
| ビジネスドメイン | 契約                | -            |
| 認証要否         | 要                  | -            |
| データ形式       | JSON                | -            |

## 2. リクエストヘッダ

| 項目名        | 必須 | 値の例           | 備考         |
| ------------ | --- | --------------- | ----------- |
| `Authorization` | 必須 | `Bearer eyJ...`    | 認証トークン |
| `Content-Type`  | 必須 | `application/json` | -            |

## 3. リクエスト

### ルートオブジェクト(リクエストボディ)

| 論理名                 | 物理名        | 型     | DBテーブル | DBカラム               | 必須 | 最小桁数 | 最大桁数 | フォーマット | 最小値 | 最大値 | 備考 |
| ---------------------- | ------------- | ------ | ---------- | ---------------------- | ---- | -------- | -------- | ------------ | ------ | :----- | :--- |
| ユーザー提供サービスID | userServiceId | string | 契約       | ユーザー提供サービスID | 必須 | 36       | 36       | UUID         | -      | -      | -    |
| 契約数                 | quantity      | number | 契約       | 契約数                 | 必須 | -        | -        | -            | 1      | 99     | -    |

## 4. 処理概要

リクエストボディの条件に基づき、契約テーブルのレコードを作成する。認証トークンにより、アクセス権限を確認する。

## 5. レスポンス

- **レスポンスコード** `201 CREATED`

- **レスポンス**

| 論理名 | 物理名 | 型     | DBテーブル | DBカラム | 備考 |
| ------ | ------ | ------ | ---------- | -------- | ---- |
| 契約ID | id     | string | 契約       | ID       |      |

## 6. エラー定義

| HTTPステータスコード      | エラーメッセージ(必須)       | エラーメッセージ詳細(任意)               | 発生条件                                          |
| ------------------------- | ---------------------------- | ---------------------------------------- | ------------------------------------------------- |
| 400 BAD REQUEST           | 入力内容に誤りがあります     | 契約数には1以上の整数を指定してください  | バリデーションエラー                              |
| 401 UNAUTHORIZED          | 認証情報が無効です           | -                                        | 認証が必要なAPIでトークンが無効または未送信の場合 |
| 404 NOT FOUND             | サービスが存在しません       | 指定されたサービスIDは登録されていません | 指定されたuserServiceIdに対応するデータがない     |
| 500 INTERNAL SERVER ERROR | システムエラーが発生しました | -                                        | 予期せぬサーバー内部エラー(DB接続失敗など)        |
